<%= layout("layouts/boilerplate.ejs") %>
<body>
  <div class="row">
    <div class="col-8 offset-2">
      <div class="container">

        <div class="card p-3 shadow rounded">
          <h2 class="mb-3">🍴 <%= listing.food %></h2>
          
          <img src="<%= listing.image %>" alt="Food Image" 
               style="width:100%; max-height:300px; object-fit:cover;" />

          <p><strong>Quantity:</strong> <%= listing.quantity %> meals</p>
          <p><strong>Freshness:</strong> <%= listing.freshness %></p>
          <p><strong>Safe to Eat (hrs):</strong> <%= listing.safehrs %></p>
          <p><strong>Pickup Location:</strong> <%= listing.location %></p>
          <p><strong>Availability:</strong> <%= listing.availablity %></p>
          <p><strong>Status:</strong> 
            <% if(listing.status === "Available"){ %>
                <span class="badge bg-success">Available</span>
            <% } else if(listing.status === "Picked Up"){ %>
                <span class="badge bg-warning">Picked Up</span>
            <% } else { %>
                <span class="badge bg-danger">Expired</span>
            <% } %>
          </p>

          <!-- Pickup button (only if available) -->
          <% if(listing.status === "Available"){ %>
            <form method="POST" action="/listings/<%= listing._id %>/pickup">
              <button type="submit" class="btn btn-primary">🚚 Pickup</button>
            </form>
          <% } %>

        </div>

        <a href="/listings" class="btn btn-secondary mt-3">⬅ Back to Listings</a>
      </div>
    </div>
  </div>
</body>
